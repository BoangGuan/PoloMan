% 磁性物质垂直于坐标轴 Magnetic substances perpendicular to the coordinate axis
% car towards 280W
clc
clear


% 环境中未放入磁性物质 No magnetic substances are placed in the environment
N0x = [-0.03 -0.03 -0.02 -0.03 -0.05 -0.05 -0.02 -0.03 -0.02 -0.04 -0.02 -0.00 -0.01 -0.02 -0.03 -0.01 -0.03 -0.04 -0.08 -0.03 -0.06 -0.01 -0.01 -0.02 -0.04 -0.04 -0.04 -0.04 -0.03 -0.04 -0.04 -0.04 -0.03 -0.02 -0.01 -0.02 -0.02 -0.02 -0.03 -0.04 -0.01 -0.01 -0.04 -0.05 -0.01 -0.02 -0.05 -0.02 -0.01 -0.01 ]; 
N0y = [-0.01 -0.01 0.00 0.01 0.00 -0.00 0.02 0.03 0.01 0.01 0.01 0.04 0.03 0.05 0.04 0.04 -0.02 0.04 0.02 -0.02 -0.02 -0.00 0.01 0.01 0.03 0.02 0.02 0.03 0.02 0.01 0.00 0.02 0.04 0.04 0.03 0.02 0.00 0.01 0.01 0.01 0.05 0.01 0.01 -0.00 0.02 0.01 0.02 0.06 0.03 0.04  ];
N0z = [0.02 -0.02 -0.02 0.01 0.01 -0.01 -0.00 0.03 0.02 0.05 0.02 0.05 0.03 0.01 0.01 0.10 0.08 0.04 0.03 0.00 0.06 0.07 0.05 0.03 0.02 0.02 0.01 0.01 0.05 0.06 0.05 0.06 0.03 0.02 0.02 0.04 0.06 0.08 0.06 0.05 0.05 0.05 0.07 0.06 0.05 0.04 0.04 0.02 0.04 0.05 ];

% 开始试验 start 
% 以小车中心为原点，由于小车自身长度以及测试材料的形状限制。
% Taking the center of the trolley as the origin
% Due to the limitation of the length of the trolley itself and the shape of the test material.

% 试验从7CM开始进行，每间隔1CM采集一次数据，共采集10组数据。
% The test starts at 7CM, collects data every 1CM, and collects 10 sets of data in total.


%7CM
N1x = [0.27 0.27 0.27 0.28 0.28 0.28 0.30 0.25 0.28 0.30 0.24 0.27 0.24 0.28 0.30 0.28 0.29 0.26 0.28 0.26 0.28 0.27 0.26 0.25 0.26 0.26 0.26 0.27 0.29 0.30 0.29 0.29 0.31 0.32 0.31 0.29 0.28 0.28 0.28 0.26 0.24 0.27 0.27 0.27 0.25 0.28 0.27 0.27 0.28 0.27];  
N1y = [0.21 0.21 0.23 0.23 0.23 0.23 0.21 0.19 0.18 0.19 0.20 0.24 0.22 0.21 0.22 0.23 0.24 0.20 0.19 0.20 0.22 0.23 0.24 0.24 0.24 0.23 0.24 0.24 0.24 0.26 0.25 0.23 0.23 0.23 0.23 0.23 0.22 0.23 0.23 0.22 0.24 0.20 0.21 0.20 0.25 0.21 0.23 0.20 0.20 0.20 ]; 
N1z = [0.41 0.42 0.43 0.42 0.37 0.40 0.36 0.38 0.36 0.36 0.37 0.39 0.35 0.41 0.36 0.34 0.36 0.33 0.37 0.37 0.40 0.36 0.37 0.36 0.36 0.37 0.36 0.37 0.34 0.33 0.36 0.37 0.39 0.38 0.37 0.38 0.37 0.37 0.35 0.40 0.37 0.35 0.37 0.33 0.45 0.44 0.38 0.39 0.39 0.41];

%8CM
N2x = [0.14 0.10 0.11 0.12 0.10 0.09 0.10 0.11 0.12 0.12 0.13 0.12 0.10 0.11 0.10 0.11 0.12 0.10 0.11 0.13 0.12 0.11 0.11 0.10 0.08 0.09 0.10 0.10 0.09 0.10 0.09 0.08 0.09 0.11 0.09 0.10 0.09 0.13 0.12 0.09 0.10 0.11 0.13 0.12 0.10 0.10 0.12 0.10 0.09 0.09  ];
N2y = [0.15 0.15 0.14 0.18 0.14 0.16 0.18 0.14 0.15 0.16 0.16 0.15 0.15 0.16 0.16 0.13 0.12 0.13 0.12 0.13 0.15 0.15 0.14 0.15 0.16 0.18 0.18 0.15 0.16 0.18 0.16 0.15 0.14 0.17 0.18 0.15 0.15 0.16 0.13 0.12 0.14 0.14 0.16 0.16 0.15 0.14 0.16 0.18 0.17 0.16  ];
N2z = [0.21 0.23 0.19 0.19 0.17 0.19 0.22 0.22 0.23 0.20 0.20 0.21 0.22 0.21 0.20 0.19 0.19 0.17 0.14 0.16 0.18 0.19 0.18 0.18 0.14 0.19 0.15 0.12 0.16 0.19 0.20 0.17 0.16 0.19 0.13 0.20 0.17 0.16 0.17 0.19 0.23 0.23 0.20 0.19 0.21 0.20 0.17 0.20 0.23 0.23 ];

%9CM
N3x = [0.05 0.02 0.01 0.02 0.05 0.08 0.05 0.01 0.05 0.05 0.05 0.02 0.02 0.01 0.04 0.04 0.05 0.02 0.00 0.02 0.03 0.01 0.00 0.01 0.02 0.04 0.04 0.04 0.04 0.06 0.07 0.07 0.07 0.05 0.04 0.04 0.05 0.04 0.04 0.01 0.01 0.04 0.06 0.02 0.04 0.04 0.06 0.07 0.03 0.02  ];
N3y = [0.05 0.09 0.06 0.09 0.06 0.06 0.09 0.09 0.09 0.06 0.07 0.09 0.09 0.07 0.06 0.08 0.09 0.08 0.08 0.08 0.08 0.08 0.08 0.08 0.08 0.08 0.08 0.10 0.10 0.07 0.08 0.09 0.03 0.08 0.09 0.07 0.08 0.07 0.06 0.07 0.08 0.06 0.05 0.08 0.09 0.08 0.10 0.08 0.04 0.07 ];
N3z = [0.14 0.13 0.11 0.13 0.15 0.16 0.13 0.12 0.17 0.14 0.15 0.09 0.11 0.11 0.14 0.11 0.09 0.08 0.10 0.11 0.09 0.08 0.11 0.15 0.15 0.14 0.13 0.14 0.16 0.18 0.17 0.14 0.11 0.16 0.15 0.15 0.13 0.09 0.14 0.10 0.14 0.13 0.14 0.14 0.12 0.06 0.10 0.08 0.11 0.15];

%10CM
N4x = [0.01 -0.01 0.01 0.00 0.02 0.02 0.01 -0.02 0.01 0.01 0.01 -0.01 -0.01 0.01 -0.03 0.01 -0.01 -0.00 0.00 0.01 -0.01 -0.00 0.01 0.01 0.02 0.02 -0.00 -0.01 -0.02 -0.03 -0.01 -0.02 -0.02 -0.02 0.01 -0.02 -0.02 -0.01 -0.02 -0.01 -0.02 -0.00 0.01 0.02 0.01 -0.02 -0.01 -0.02 -0.00 -0.01];
N4y = [0.08 0.06 0.07 0.07 0.04 0.03 0.01 0.06 0.04 0.06 0.02 0.05 0.01 0.03 0.05 0.06 0.05 0.06 0.06 0.07 0.07 0.08 0.08 0.08 0.09 0.08 0.07 0.07 0.06 0.06 0.07 0.06 0.06 0.07 0.05 0.05 0.07 0.03 0.04 0.08 0.10 0.05 0.07 0.06 0.04 0.07 0.06 0.06 0.07 0.06  ];
N4z = [0.07 0.07 0.09 0.05 0.07 0.05 0.12 0.09 0.08 0.10 0.09 0.10 0.10 0.06 0.07 0.10 0.09 0.13 0.13 0.10 0.11 0.13 0.12 0.08 0.10 0.12 0.12 0.09 0.06 0.07 0.07 0.07 0.08 0.11 0.09 0.05 0.08 0.03 0.03 0.03 0.06 0.09 0.07 0.07 0.03 0.07 0.10 0.10 0.07 0.09];

%11CM
N5x = [0.00 -0.02 -0.00 -0.03 -0.01 -0.02 -0.03 -0.02 -0.02 -0.04 -0.04 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.02 -0.00 0.00 -0.01 -0.00 0.00 -0.01 -0.04 -0.02 -0.01 -0.02 -0.02 -0.01 0.01 0.01 0.01 0.01 0.01 -0.02 -0.02 -0.01 -0.02 -0.02 0.00 -0.00 -0.01 -0.02 -0.02 -0.02 -0.01 0.00 0.00];  
N5y = [0.04 0.04 0.05 0.05 0.05 0.07 0.07 0.05 0.03 0.02 0.02 0.04 0.04 0.04 0.05 0.05 0.07 0.07 0.06 0.06 0.05 -0.07 0.04 0.04 0.05 0.04 0.07 0.05 0.06 0.05 0.03 0.04 0.04 0.03 0.03 0.04 0.06 0.02 0.02 0.03 0.05 0.03 0.02 0.04 0.05 0.06 0.05 0.03 0.03 0.03  ];
N5z = [0.08 0.07 0.05 0.07 0.06 0.07 0.07 0.04 0.04 0.08 0.08 0.04 0.05 0.05 0.04 0.05 0.08 0.09 0.03 0.04 0.07 0.03 0.02 0.01 0.06 0.04 0.02 0.03 0.02 0.04 0.04 0.02 0.05 0.01 -0.02 -0.03 0.04 0.02 0.06 0.05 0.05 0.05 0.06 0.07 0.07 0.05 0.04 0.04 0.06 0.07 ];

%12CM
N6x = [-0.04 -0.03 0.01 0.01 0.03 0.02 0.01 0.00 -0.01 -0.01 -0.00 -0.02 0.01 0.02 -0.01 -0.00 -0.02 -0.02 0.00 -0.04 -0.00 -0.03 -0.01 -0.01 -0.01 -0.02 0.02 -0.00 0.00 0.04 0.01 0.02 0.03 -0.00 0.01 -0.04 -0.00 0.01 0.02 0.02 0.01 0.01 0.03 0.01 -0.01 0.01 0.01 -0.00 0.01 0.03] ;
N6y = [-0.02 0.01 -0.00 0.01 0.04 0.06 0.04 0.01 -0.00 -0.00 -0.01 -0.01 -0.00 0.01 0.03 0.04 0.03 0.02 0.03 0.03 0.02 0.01 0.01 -0.01 0.00 0.01 -0.01 -0.03 -0.03 -0.04 0.00 -0.01 -0.00 0.04 0.05 0.02 0.01 0.02 0.03 0.02 0.00 0.00 0.01 0.02 0.03 0.02 0.04 0.05 0.03 0.03  ];
N6z = [0.07 0.02 0.02 0.03 0.05 0.04 0.04 0.04 0.07 0.07 0.04 0.04 0.07 0.06 0.07 0.09 0.07 0.03 0.03 0.07 0.03 0.09 0.06 0.04 0.08 0.08 0.06 0.06 0.10 0.08 0.05 0.04 0.04 0.05 0.03 0.03 0.09 0.06 0.03 0.04 0.05 0.04 0.06 0.05 0.05 0.04 0.02 0.02 0.03 0.06];


%13CM
N7x = [-0.01 -0.02 -0.00 0.00 -0.00 0.02 0.02 0.03 0.00 -0.00 0.02 0.02 0.02 0.01 0.01 0.01 0.01 0.01 0.02 0.02 0.03 0.01 0.03 -0.01 0.01 0.00 -0.00 0.04 0.03 0.01 0.01 -0.00 0.01 -0.00 -0.00 0.00 -0.02 -0.01 -0.01 -0.02 -0.01 0.01 0.00 -0.00 -0.00 0.01 0.00 -0.00 0.00 0.01  ];
N7y = [0.03 0.02 0.02 0.03 -0.00 0.00 0.03 0.04 0.01 0.00 0.01 0.00 0.01 0.01 0.01 0.02 0.01 0.01 0.01 0.03 0.03 0.02 0.02 0.03 0.01 0.04 0.01 -0.00 0.03 0.05 0.03 0.00 0.00 0.01 0.03 0.02 -0.01 0.01 -0.03 0.02 0.02 0.01 0.02 0.01 0.01 0.01 -0.01 -0.02 -0.04 -0.03  ];
N7z = [0.04 0.04 0.04 0.06 0.05 0.03 0.05 0.05 0.03 0.05 0.06 0.04 0.03 0.04 0.06 0.04 0.04 0.05 0.03 0.02 0.07 0.09 0.07 0.10 0.06 0.07 0.05 0.12 0.09 0.06 0.09 0.09 0.07 0.05 0.05 0.05 0.06 0.04 0.07 0.02 0.03 0.04 0.04 0.05 0.06 0.04 0.06 0.06 0.06 0.05  ];


%14CM
N8x = [-0.01 -0.01 -0.00 -0.00 -0.03 0.02 -0.00 -0.01 -0.01 -0.04 -0.03 -0.02 -0.02 0.00 -0.01 -0.01 -0.03 -0.02 -0.04 -0.03 -0.03 -0.03 -0.03 -0.03 -0.02 -0.00 -0.02 -0.02 -0.03 -0.02 -0.03 -0.04 -0.02 -0.02 -0.01 -0.01 -0.03 -0.04 -0.03 -0.07 -0.04 -0.06 -0.04 -0.00 -0.02 -0.03 -0.03 -0.00 -0.01 -0.02];  
N8y = [0.02 0.02 0.03 0.02 0.03 0.04 0.01 -0.01 0.01 0.00 0.01 0.00 0.03 -0.00 0.04 0.03 0.01 0.02 0.03 0.05 0.02 0.01 0.02 0.00 -0.01 -0.01 -0.02 -0.01 0.03 0.03 -0.01 0.00 0.02 0.03 0.02 0.01 0.01 0.01 0.02 0.02 0.03 0.03 0.02 0.01 0.01 0.04 0.02 0.02 0.00 0.04  ];
N8z = [0.01 0.01 0.02 0.02 0.01 0.02 0.05 -0.00 -0.03 0.02 -0.04 -0.01 0.01 0.01 0.02 0.00 0.01 0.02 0.02 0.05 0.04 0.03 0.02 0.01 -0.00 0.02 0.02 0.03 0.03 0.03 0.04 0.05 0.04 0.02 -0.01 0.01 0.02 0.02 0.02 -0.00 0.00 0.05 0.06 0.04 0.03 0.02 0.02 -0.03 0.01 0.01];


%15CM
N9x = [-0.03 -0.02 -0.01 -0.01 -0.01 -0.02 -0.02 -0.02 -0.03 -0.04 -0.01 -0.00 -0.02 0.00 0.02 -0.00 -0.01 -0.01 -0.03 -0.04 -0.02 -0.03 -0.02 -0.05 -0.02 -0.06 -0.04 -0.03 -0.02 -0.01 -0.03 -0.01 -0.02 0.01 -0.04 -0.02 -0.02 -0.02 -0.01 -0.02 -0.03 -0.03 -0.02 -0.01 -0.01 -0.01 -0.02 -0.02 -0.01 -0.03  ];
N9y = [0.02 0.01 0.02 0.04 0.04 0.03 0.04 0.02 0.01 -0.01 -0.01 -0.00 0.00 0.01 0.01 0.01 0.01 0.01 -0.02 0.01 -0.01 0.00 0.03 0.01 0.04 0.01 -0.00 0.01 0.02 0.01 -0.00 0.02 0.03 0.03 -0.02 0.02 0.00 0.01 0.01 0.02 0.02 0.02 0.00 -0.00 0.00 0.00 -0.00 0.00 0.03 0.05  ];
N9z = [0.05 0.01 0.04 0.05 0.03 0.00 0.03 0.05 0.02 0.01 0.02 0.03 0.02 0.01 0.00 -0.01 -0.01 -0.02 -0.01 -0.01 0.02 0.03 0.01 0.02 0.04 0.05 0.02 0.05 0.06 0.03 0.03 0.04 0.04 0.05 0.08 0.06 0.04 0.03 0.06 0.09 0.08 0.07 0.07 0.07 0.10 0.09 0.06 0.02 0.02 0.05 ];


%16CM
N10x = [-0.04 -0.03 -0.03 -0.04 -0.04 -0.07 -0.03 -0.03 -0.04 -0.04 -0.04 -0.02 -0.03 -0.07 -0.01 -0.04 -0.02 -0.03 -0.06 -0.02 -0.04 -0.04 -0.02 -0.05 -0.05 -0.04 -0.06 -0.04 -0.00 0.00 -0.01 -0.02 -0.04 -0.05 -0.05 -0.04 -0.05 -0.06 -0.04 -0.04 -0.03 -0.03 -0.03 -0.04 -0.04 -0.03 -0.04 -0.01 -0.04 -0.06 ] ;
N10y = [0.04 0.01 0.02 0.04 0.02 0.02 0.06 0.06 0.07 0.03 0.06 0.04 0.02 0.04 0.06 0.02 0.01 0.04 0.00 0.01 0.01 0.05 0.02 0.05 0.05 0.02 0.02 0.03 0.03 0.04 0.04 0.03 0.01 0.01 0.02 0.00 0.01 0.03 0.02 0.04 0.00 0.02 0.03 0.03 0.00 0.03 0.00 0.04 0.01 0.02  ];
N10z = [0.08 0.08 0.07 0.06 0.03 0.08 0.07 0.01 0.06 0.02 0.05 0.03 0.04 0.01 0.02 0.00 0.04 0.01 0.03 0.08 0.06 0.07 0.06 0.07 0.09 0.10 0.09 0.04 0.05 0.05 0.03 0.03 0.05 0.04 0.03 0.04 0.05 0.05 0.05 0.08 0.08 -0.02 0.01 0.04 0.02 0.07 0.05 0.03 0.04 0.07];


% 实验结束后，从环境中移走磁性物质，再次测量此时的环境磁强度
% After the experiment, remove the magnetic substance from the environment,
% and measure the magnetic intensity of the environment at this time again.
N11x = [-0.04 -0.04 -0.03 -0.02 -0.03 -0.02 -0.04 -0.01 -0.03 -0.03 -0.02 -0.03 -0.02 -0.01 -0.01 -0.04 -0.04 -0.06 -0.05 -0.06 -0.05 -0.04 -0.02 -0.03 -0.04 -0.04 -0.03 -0.04 -0.06 -0.07 -0.06 -0.07 -0.06 -0.05 -0.06 -0.05 -0.03 -0.03 -0.03 -0.04 -0.04 -0.05 -0.05 -0.04 -0.04 -0.03 -0.04 -0.03 -0.04 -0.05  ];
N11y = [0.07 0.06 0.05 0.02 0.03 0.03 0.04 0.05 0.07 0.03 0.04 -0.01 0.04 0.06 0.05 0.03 0.04 -0.01 0.02 0.02 0.01 0.03 0.02 0.01 0.01 0.03 0.01 -0.00 0.00 0.00 -0.01 -0.01 -0.00 -0.01 0.00 -0.01 -0.01 0.02 0.03 0.03 0.05 0.02 0.05 0.03 0.07 0.04 0.05 0.04 0.01 0.06 ]; 
N11z = [0.02 0.04 0.05 0.04 0.05 0.06 -0.01 0.10 0.04 0.05 0.06 0.06 0.02 0.03 0.06 0.06 0.03 0.04 -0.01 0.09 0.09 0.08 0.07 0.06 0.04 0.03 0.01 0.04 0.05 0.04 0.07 0.09 0.08 0.06 0.04 0.05 0.05 0.04 0.04 0.02 0.07 0.10 0.06 0.07 0.06 0.05 0.07 0.05 0.03 0.05  ];



% 将数据整合到一个数组，便于之后进行图像处理
% Combine the data into an array for later image processing

x = [N1x,N2x,N3x,N4x,N5x,N6x,N7x,N8x,N9x,N10x,N0x]; % The result with environment magnetic strength before experiment
x1 = [N1x,N2x,N3x,N4x,N5x,N6x,N7x,N8x,N9x,N10x,N11x]; % The result with environment magnetic strength after experiment
x2 = [N11x,N0x]; % Environment magnetic strength between before the experiment and after the experiment

t = 1:1:50;

% 放置磁性物质前的数据结果
% The result with environment magnetic strength before experiment

i = 1:1:10;
figure(1)

for xi = i

%subplot(2,5,xi)
subplot(2,10,xi)



l1 = scatter(t,N0x,'red','filled'); % The environment magnetic strength

hold on

% 读实验值
% read the experiments result

temp_value = x(1,1+(xi-1)*50:xi*50);

l2 = scatter(t,temp_value,'green','filled'); %Experiment value


axis([0 50 min(x) max(x)])%指定坐标轴范围 set the boundary of figure

xlabel('Experiment times')
ylabel('Magnetic value')

line([1,50],[max(N0x),max(N0x)],'linestyle','--')
line([1,50],[min(N0x),min(N0x)],'linestyle','--')

line([1,50],[max(temp_value),max(temp_value)])
line([1,50],[min(temp_value),min(temp_value)])

title(['Distance: ',num2str(xi+6),'CM'])
hold off


i = i +1;
if i == 10
    break 
end

end

legend([l1;l2],'Environment value','Experiment value','Orientation','horizontal','location',[0.15,0.04,0.74,0]);

% The result with environment magnetic strength after experiment
i = 1:1:10;

for xi = i

%subplot(2,5,xi)
subplot(2,10,xi+10)



l1 = scatter(t,N11x,'red'); % The environment magnetic strength 

hold on

temp_value = x(1,1+(xi-1)*50:xi*50);

l2 = scatter(t,temp_value,'green'); 


axis([0 50 min(x1) max(x1)])

xlabel('Experiment times')
ylabel('Magnetic value')

line([1,50],[max(N11x),max(N11x)],'linestyle','--')
line([1,50],[min(N11x),min(N11x)],'linestyle','--')

line([1,50],[max(temp_value),max(temp_value)])
line([1,50],[min(temp_value),min(temp_value)])

title(['Distance: ',num2str(xi+6),'CM'])
hold off


i = i +1;
if i == 10
    break 
end

end

legend([l1;l2],'Environment value','Experiment value','Orientation','horizontal','location',[0.15,0.04,0.74,0]);

title_name = 'The result with environment magnetic strength before(●)and after(○) perpendicular experiment ';
sgtitle(title_name);


